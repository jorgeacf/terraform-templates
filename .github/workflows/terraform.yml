name: 'Terraform'

on:
  push:
    branches:
    - main
  pull_request:

jobs:
  terraform:
    name: 'Terraform'
    env:
      GOOGLE_CREDENTIALS: ${{ secrets.GCP_TERRAFORM_SA }}
    runs-on: ubuntu-latest
    container:
      image: hashicorp/terraform:0.14.10
    environment: production

    # Use the Bash shell regardless whether the GitHub Actions runner is ubuntu-latest, macos-latest, or windows-latest
    #defaults:
    #  run:
    #    shell: bash

    steps:
    # Checkout the repository to the GitHub Actions runner
    - name: Checkout
      uses: actions/checkout@v2

    - name: 'Terraform Format'
      run: terraform --version
